{% extends "layouts/full_width_layout.html" %}

{% block title %}菜单系统测试 - Kronos{% endblock %}

{% block content %}
<div style="padding: 20px;">
    <h1>菜单系统测试页面</h1>
    
    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
        <h3>Primary Menu (Header 一级菜单):</h3>
        {% if primary_menu %}
            <ul>
            {% for item in primary_menu %}
                <li>
                    <strong>{{ item.title }}</strong> (key: {{ item.key }}) 
                    - Has sidebar: {{ item.has_sidebar }}
                    {% if item.url %} - URL: {{ item.url }}{% endif %}
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p style="color: red;">Primary menu not found!</p>
        {% endif %}
    </div>
    
    <div style="background: #e9ecef; padding: 20px; border-radius: 8px; margin: 20px 0;">
        <h3>Current Theme & Sidebar Menu (二级菜单):</h3>
        <p><strong>Current Endpoint:</strong> {{ current_endpoint }}</p>
        <p><strong>Current Theme:</strong> {{ current_theme or "None" }}</p>
        <p><strong>Should Use Sidebar:</strong> {{ should_use_sidebar }}</p>
        
        {% if sidebar_menu %}
            <h4>Sidebar Menu Sections:</h4>
            {% for section in sidebar_menu %}
                <div style="margin: 10px 0; padding: 10px; background: white; border-radius: 4px;">
                    <strong>{{ section.title }}</strong> ({{ section.icon }})
                    {% if section.items %}
                        <ul>
                        {% for item in section.items %}
                            <li>{{ item.title }} - {{ item.endpoint }} ({{ item.icon }})</li>
                        {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <p style="color: blue;">No sidebar menu for current theme</p>
        {% endif %}
    </div>
    
    <div style="background: #d4edda; padding: 20px; border-radius: 8px; margin: 20px 0;">
        <h3>测试不同主题的链接:</h3>
        <p><a href="{{ url_for('views.prediction') }}">股票预测 (prediction theme)</a></p>
        <p><a href="{{ url_for('views.portfolio') }}">投资组合 (trading theme)</a></p>
        <p><a href="{{ url_for('views.technical_analysis') }}">技术分析 (analysis theme)</a></p>
        <p><a href="{{ url_for('views.market_news') }}">市场资讯 (no sidebar)</a></p>
        <p><a href="{{ url_for('views.learning') }}">学习中心 (no sidebar)</a></p>
    </div>
</div>
{% endblock %}