{% extends "layouts/sidebar.html" %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<div class="container p-6">
    <!-- 表单区域 -->
    <div class="mb-4 bg-white rounded-xl shadow-prediction p-6 transition-all duration-300 hover:shadow-xl">
        <h3 class="text-xl font-bold text-gray-800 flex items-center gap-2 mb-6">
            <i class="fas fa-brain text-primary text-lg"></i>
            AI股票预测
        </h3>
        <form hx-post="/api/predictions"
                    hx-target="#prediction-results"
                    hx-indicator="#loading"
                    hx-ext="json-enc"
                    class="space-y-6">
            <!-- 单行表单布局 -->
            <div class="flex items-end gap-3 flex-nowrap overflow-x-auto hide-scrollbar">
                <!-- 股票代码 -->
                <div class="flex flex-col shrink-0 min-w-[120px]">
                    <label for="stock_code" class="text-xs font-medium text-gray-600 mb-1.5 whitespace-nowrap">股票代码</label>
                    <input 
                        type="text" 
                        id="stock_code" 
                        name="stock_code" 
                        placeholder="000001" 
                        required 
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary focus:border-transparent text-sm h-[38px]"
                    >
                </div>
                
                <!-- 预测天数 -->
                <div class="flex flex-col shrink-0 min-w-[100px]">
                    <label for="prediction_days" class="text-xs font-medium text-gray-600 mb-1.5 whitespace-nowrap">预测天数</label>
                    <select 
                        id="prediction_days" 
                        name="prediction_days" 
                        class="custom-select w-full px-3 py-2 border border-gray-300 rounded-md  focus:ring-primary focus:border-transparent text-sm h-[38px]"
                    >
                        <option value="7">7天</option>
                        <option value="15">15天</option>
                        <option value="30">30天</option>
                    </select>
                </div>
                
                <!-- 预测模型 -->
                <div class="flex flex-col shrink-0 min-w-[140px]">
                    <label for="model_type" class="text-xs font-medium text-gray-600 mb-1.5 whitespace-nowrap">预测模型</label>
                    <select 
                        id="model_type" 
                        name="model_type" 
                        class="custom-select w-full px-3 py-2 border border-gray-300 rounded-md  focus:ring-primary focus:border-transparent text-sm h-[38px]"
                    >
                        <option value="kronos-mini">Kronos Mini</option>
                        <option value="kronos-small">Kronos Small</option>
                        <option value="kronos-base">Kronos Base</option>
                    </select>
                </div>
                
                <!-- 按钮组 -->
                <div class="flex items-center gap-3 shrink-0 ml-2">
                    <button 
                        type="submit" 
                        class="bg-primary hover:bg-primary-dark text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center gap-1.5 shadow-sm hover:shadow whitespace-nowrap text-sm h-[38px]"
                    >
                        <i class="fas fa-magic text-xs"></i>
                        <span>开始预测</span>
                    </button>
                    <div 
                        id="loading" 
                        class="hidden flex items-center gap-2 text-gray-600 text-sm whitespace-nowrap"
                        hx-indicator="this"
                    >
                        <i class="fas fa-spinner fa-spin text-primary"></i> 
                        <span>预测中...</span>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- 结果区域 -->
    <div id="prediction-results">
        <div class="bg-white rounded-xl shadow-prediction p-6 transition-all duration-300 hover:shadow-xl">
            <h3 class="text-xl font-bold text-gray-800 flex items-center gap-2 mb-6">
                <i class="fas fa-chart-line text-primary text-lg"></i>
                预测结果
            </h3>
            <div class="space-y-4">
                <div class="prediction-chart-placeholder flex flex-col items-center justify-center py-16 text-gray-400 space-y-4">
                    <i class="fas fa-chart-line fa-5x opacity-70"></i>
                    <p class="text-gray-500 text-lg">请选择股票并点击预测按钮开始AI分析</p>
                </div>
            </div>
        </div>
    </div> 
    
</div>
{% endblock %}