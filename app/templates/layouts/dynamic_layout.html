{% extends "layouts/base.html" %}

{% block body %}
<div class="flex h-screen bg-gray-50 overflow-hidden">
    <!-- Dynamic Sidebar -->
    <aside id="sidebar" class="w-64 bg-white border-r border-gray-200 shadow-lg transition-all duration-300 ease-in-out transform">
        <!-- Sidebar Edge Toggle Button -->
        <div class="absolute top-4 right-[-12px] z-10 w-6 h-12 bg-white rounded-r-md border border-gray-200 flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors" onclick="layoutManager.toggleSidebar()" title="切换侧边栏">
            <i class="fas fa-chevron-left text-gray-500"></i>
        </div>
        
        <div class="py-4 h-full overflow-y-auto">
            {% if sidebar_menu %}
                {% for section in sidebar_menu %}
                <div class="mb-6 px-4">
                    <h3 class="flex items-center text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 px-3">
                        <i class="{{ section.icon }} mr-2"></i>
                        {{ section.title }}
                    </h3>
                    
                    {% if section['items'] %}
                    <div class="space-y-1">
                        {% for item in section['items'] %}
                        <a href="{{ url_for(item.endpoint) }}" 
                           class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.endpoint == item.endpoint %} bg-blue-50 text-blue-600 {% else %} text-gray-700 hover:bg-gray-50 {% endif %}" 
                           title="{{ item.title }}">
                            <div class="mr-3 text-gray-400">
                                <i class="{{ item.icon }}"></i>
                            </div>
                            <span>{{ item.title }}</span>
                        </a>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            {% endif %}
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto">
        <div class="p-6">
            <!-- Page Content -->
            <div class="bg-white rounded-lg shadow overflow-hidden">
                {% block content %}{% endblock %}
            </div>
        </div>
    </main>
</div>
{% endblock %}